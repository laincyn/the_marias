<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>The Mar√≠as</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root {
  --red-primary: #8b0000;
  --red-secondary: #1a0000;
  --blue-primary: #003c8b;
  --blue-secondary: #000a1a;
  --teal-primary: #008080;
  --teal-secondary: #001a1a;
  --transition-smooth: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

body{width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative;background:var(--red-secondary);transition:var(--transition-smooth)}
body.blue-theme{background:var(--blue-secondary)}
body.teal-theme{background:var(--teal-secondary)}
body::before{content:'';position:absolute;width:200%;height:200%;background:radial-gradient(circle at 30% 50%,rgba(80,0,0,.6),transparent 50%),radial-gradient(circle at 70% 50%,rgba(60,0,0,.5),transparent 50%),radial-gradient(circle at 50% 30%,rgba(70,0,0,.4),transparent 50%);filter:blur(80px);animation:bg 20s ease-in-out infinite;transition:var(--transition-smooth)}
body.blue-theme::before{background:radial-gradient(circle at 30% 50%,rgba(0,40,80,.6),transparent 50%),radial-gradient(circle at 70% 50%,rgba(0,30,60,.5),transparent 50%),radial-gradient(circle at 50% 30%,rgba(0,35,70,.4),transparent 50%)}
body.teal-theme::before{background:radial-gradient(circle at 30% 50%,rgba(0,80,80,.6),transparent 50%),radial-gradient(circle at 70% 50%,rgba(0,60,60,.5),transparent 50%),radial-gradient(circle at 50% 30%,rgba(0,70,70,.4),transparent 50%)}
@keyframes bg{0%,100%{transform:translate(-25%,-25%) rotate(0)}33%{transform:translate(-30%,-20%) rotate(120deg)}66%{transform:translate(-20%,-30%) rotate(240deg)}}

/* Enhanced floating particles */
.particles {position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;overflow:hidden;}
.particle {position:absolute;background:rgba(255,255,255,0.08);border-radius:50%;animation:float 25s infinite linear;backdrop-filter: blur(1px);}
.particle:nth-child(3n) {background: rgba(255,255,255,0.05);}
.particle:nth-child(3n+1) {background: rgba(255,255,255,0.12);}
.particle:nth-child(3n+2) {background: rgba(255,255,255,0.03);}
@keyframes float {
  0% {transform:translateY(110vh) translateX(-20px) rotate(0deg); opacity:0;}
  10% {opacity:0.7;}
  90% {opacity:0.7;}
  100% {transform:translateY(-150px) translateX(20px) rotate(360deg); opacity:0;}
}

.title{position:absolute;top:15%;font:700 52px/1.2 -apple-system,BlinkMacSystemFont,'SF Pro Display',sans-serif;background:linear-gradient(90deg,#fff,#b0b0b0,#fff,#d0d0d0,#fff);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.5px;filter:drop-shadow(0 0 20px rgba(139,0,0,.8)) drop-shadow(0 0 40px rgba(139,0,0,.5)) drop-shadow(0 4px 8px rgba(0,0,0,.9));animation:flow 6s ease-in-out infinite,pulse 4s ease-in-out infinite;opacity:0;transform:translateY(-20px);transition:var(--transition-smooth);z-index:2;padding:0 10px}
body.blue-theme .title{filter:drop-shadow(0 0 20px rgba(0,60,139,.8)) drop-shadow(0 0 40px rgba(0,60,139,.5)) drop-shadow(0 4px 8px rgba(0,0,0,.9))}
body.teal-theme .title{filter:drop-shadow(0 0 20px rgba(0,128,128,.8)) drop-shadow(0 0 40px rgba(0,128,128,.5)) drop-shadow(0 4px 8px rgba(0,0,0,.9))}
.title.visible{opacity:1;transform:translateY(0)}
@keyframes flow{0%,100%{background-position:0 center}50%{background-position:200% center}}
@keyframes pulse{0%,100%{filter:drop-shadow(0 0 20px rgba(139,0,0,.8)) drop-shadow(0 0 40px rgba(139,0,0,.5)) drop-shadow(0 4px 8px rgba(0,0,0,.9))}50%{filter:drop-shadow(0 0 30px rgba(139,0,0,1)) drop-shadow(0 0 60px rgba(139,0,0,.7)) drop-shadow(0 4px 8px rgba(0,0,0,.9))}}
body.blue-theme .title{animation:flow 6s ease-in-out infinite,pulseBlue 4s ease-in-out infinite}
body.teal-theme .title{animation:flow 6s ease-in-out infinite,pulseTeal 4s ease-in-out infinite}
@keyframes pulseBlue{0%,100%{filter:drop-shadow(0 0 20px rgba(0,60,139,.8)) drop-shadow(0 0 40px rgba(0,60,139,.5)) drop-shadow(0 4px 8px rgba(0,0,0,.9))}50%{filter:drop-shadow(0 0 30px rgba(0,80,180,1)) drop-shadow(0 0 60px rgba(0,60,139,.7)) drop-shadow(0 4px 8px rgba(0,0,0,.9))}}
@keyframes pulseTeal{0%,100%{filter:drop-shadow(0 0 20px rgba(0,128,128,.8)) drop-shadow(0 0 40px rgba(0,128,128,.5)) drop-shadow(0 4px 8px rgba(0,0,0,.9))}50%{filter:drop-shadow(0 0 30px rgba(0,180,180,1)) drop-shadow(0 0 60px rgba(0,128,128,.7)) drop-shadow(0 4px 8px rgba(0,0,0,.9))}}

.vinyl-container{width:400px;height:400px;display:flex;justify-content:center;align-items:center;opacity:0;transform:scale(.8);transition:var(--transition-smooth);z-index:1;position:relative;cursor:pointer;}
.vinyl-container::before {
  content: '';
  position: absolute;
  width: 120%;
  height: 120%;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(139,0,0,0.2) 0%, transparent 70%);
  filter: blur(20px);
  z-index: -1;
  opacity: 0;
  transition: var(--transition-smooth);
}
body.blue-theme .vinyl-container::before {
  background: radial-gradient(circle, rgba(0,60,139,0.2) 0%, transparent 70%);
}
body.teal-theme .vinyl-container::before {
  background: radial-gradient(circle, rgba(0,128,128,0.2) 0%, transparent 70%);
}
.vinyl-container.visible{opacity:1;transform:scale(1)}
.vinyl-container.visible::before {
  opacity: 1;
}
.vinyl{width:100%;height:100%;border-radius:50%;animation:spin 4.5s linear infinite;box-shadow:0 0 40px rgba(0,0,0,.5);position:relative;z-index:1;transition: var(--transition-smooth);}
.vinyl.paused {
  animation-play-state: paused;
}
.vinyl::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: radial-gradient(circle, #000 30%, #333 100%);
  box-shadow: 0 0 10px rgba(0,0,0,0.5);
}
@keyframes spin{to{transform:rotate(360deg)}}

.play-btn{position:absolute;width:120px;height:120px;border-radius:50%;background:linear-gradient(135deg,#0a0000 0%,#1a0000 50%,#000 100%);border:3px solid rgba(80,0,0,.6);cursor:pointer;display:flex;justify-content:center;align-items:center;z-index:10;transition:var(--transition-smooth);box-shadow:0 8px 32px rgba(0,0,0,.8),inset 0 2px 8px rgba(139,0,0,.3),0 0 0 1px rgba(255,255,255,.05) inset;opacity:0;transform:scale(0.8);}
.play-btn.visible{opacity:1;transform:scale(1);}
.play-btn::before{content:'';position:absolute;top:-3px;left:-3px;right:-3px;bottom:-3px;border-radius:50%;background:linear-gradient(135deg,rgba(139,0,0,.4),transparent,rgba(139,0,0,.2));opacity:0;transition:var(--transition-smooth)}
.play-btn:hover{transform:scale(1.15);box-shadow:0 12px 48px rgba(139,0,0,.8),0 0 60px rgba(139,0,0,.4),inset 0 2px 12px rgba(139,0,0,.5),0 0 0 1px rgba(255,255,255,.1) inset;border-color:rgba(139,0,0,.9)}
.play-btn:hover::before{opacity:1}
.play-btn:active{transform:scale(1.05)}
.play-btn.fade{opacity:0;transform:scale(.7);transition:opacity .7s,transform .7s;pointer-events:none}
.play-icon{width:0;height:0;border-left:32px solid rgba(255,255,255,.95);border-top:22px solid transparent;border-bottom:22px solid transparent;margin-left:8px;filter:drop-shadow(0 2px 6px rgba(0,0,0,.5));transition:var(--transition-smooth)}
.play-btn:hover .play-icon{filter:drop-shadow(0 2px 8px rgba(0,0,0,.7)) drop-shadow(0 0 8px rgba(255,255,255,.3))}

.lyrics{position:absolute;bottom:15%;width:800px;max-width:90%;height:80px;display:flex;justify-content:center;align-items:center;z-index:2;opacity:0;transition:var(--transition-smooth)}
.lyrics.visible{opacity:1}
.lyrics span{font:600 30px/1.6 -apple-system,BlinkMacSystemFont,'SF Pro Display','Helvetica Neue',sans-serif;background:linear-gradient(90deg,#fff,#e0e0e0,#fff,#f0f0f0,#fff);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-align:center;position:absolute;opacity:0;transform:translateX(-30px);letter-spacing:-.3px;filter:drop-shadow(0 2px 8px rgba(0,0,0,.8)) drop-shadow(0 0 15px rgba(255,255,255,.3));animation:flowLyrics 8s ease-in-out infinite}
@keyframes flowLyrics{0%,100%{background-position:0 center}50%{background-position:200% center}}
.lyrics span.in{animation:in 1.2s cubic-bezier(.4,0,.2,1) forwards}
.lyrics span.out{animation:out 1s cubic-bezier(.4,0,.2,1) forwards}
@keyframes in{0%{opacity:0;transform:translateX(-40px);filter:blur(8px)}60%{opacity:.7;filter:blur(2px)}100%{opacity:1;transform:translateX(0);filter:blur(0)}}
@keyframes out{0%{opacity:1;transform:translateX(0);filter:blur(0)}40%{opacity:.5;filter:blur(2px)}100%{opacity:0;transform:translateX(40px);filter:blur(8px)}}

.nav{position:absolute;top:30px;left:50%;transform:translateX(-50%) translateY(-40px);display:flex;gap:20px;z-index:100;opacity:0;pointer-events:none;transition:var(--transition-smooth);padding:12px 24px;background:linear-gradient(135deg,rgba(20,0,0,.6) 0%,rgba(40,0,10,.5) 50%,rgba(20,0,0,.6) 100%);border-radius:50px;backdrop-filter:blur(20px) saturate(180%);border:1px solid rgba(139,0,0,.3);box-shadow:0 8px 32px rgba(0,0,0,.4),0 0 0 1px rgba(255,255,255,.05) inset,0 0 60px rgba(139,0,0,.2)}
body.blue-theme .nav{background:linear-gradient(135deg,rgba(0,10,20,.6) 0%,rgba(0,20,40,.5) 50%,rgba(0,10,20,.6) 100%);border:1px solid rgba(0,60,139,.3);box-shadow:0 8px 32px rgba(0,0,0,.4),0 0 0 1px rgba(255,255,255,.05) inset,0 0 60px rgba(0,60,139,.2)}
body.teal-theme .nav{background:linear-gradient(135deg,rgba(0,20,20,.6) 0%,rgba(0,40,40,.5) 50%,rgba(0,20,20,.6) 100%);border:1px solid rgba(0,128,128,.3);box-shadow:0 8px 32px rgba(0,0,0,.4),0 0 0 1px rgba(255,255,255,.05) inset,0 0 60px rgba(0,128,128,.2)}
.nav.visible{opacity:1;transform:translateX(-50%) translateY(0);pointer-events:auto}

.nav a{padding:11px 26px;background:linear-gradient(135deg,rgba(139,0,0,.18),rgba(80,0,0,.28));border:1.5px solid rgba(139,0,0,.45);border-radius:28px;color:rgba(255,255,255,.96);text-decoration:none;font:600 13px/1.4 -apple-system,BlinkMacSystemFont,'SF Pro Display',sans-serif;letter-spacing:.4px;text-transform:uppercase;transition:var(--transition-smooth);backdrop-filter:blur(12px) saturate(150%);box-shadow:0 4px 16px rgba(0,0,0,.35),0 0 0 1px rgba(255,255,255,.1) inset,0 2px 4px rgba(139,0,0,.2) inset;position:relative;overflow:hidden}
body.blue-theme .nav a{background:linear-gradient(135deg,rgba(0,60,139,.18),rgba(0,40,80,.28));border:1.5px solid rgba(0,60,139,.45);box-shadow:0 4px 16px rgba(0,0,0,.35),0 0 0 1px rgba(255,255,255,.1) inset,0 2px 4px rgba(0,60,139,.2) inset}
body.teal-theme .nav a{background:linear-gradient(135deg,rgba(0,128,128,.18),rgba(0,80,80,.28));border:1.5px solid rgba(0,128,128,.45);box-shadow:0 4px 16px rgba(0,0,0,.35),0 0 0 1px rgba(255,255,255,.1) inset,0 2px 4px rgba(0,128,128,.2) inset}
.nav a::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.15),transparent);transition:left .5s ease-out}
.nav a::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:28px;background:linear-gradient(135deg,rgba(255,255,255,.08),transparent);opacity:0;transition:var(--transition-smooth)}
.nav a:hover::before{left:100%}
.nav a:hover::after{opacity:1}
.nav a:hover{transform:translateY(-4px) scale(1.08);color:#fff;text-shadow:0 0 12px rgba(255,255,255,.5)}
.nav a:nth-child(1):hover{background:linear-gradient(135deg,rgba(50,50,55,.5),rgba(35,35,40,.6));border-color:rgba(100,100,105,.7);box-shadow:0 10px 30px rgba(50,50,55,.5),0 0 40px rgba(80,80,85,.35),0 0 0 1px rgba(255,255,255,.18) inset}
.nav a:nth-child(2):hover{background:linear-gradient(135deg,rgba(110,50,10,.5),rgba(90,35,5,.6));border-color:rgba(160,80,20,.7);box-shadow:0 10px 30px rgba(110,50,10,.5),0 0 40px rgba(140,70,15,.35),0 0 0 1px rgba(255,255,255,.18) inset}
.nav a:nth-child(3):hover{background:linear-gradient(135deg,rgba(25,40,75,.5),rgba(18,30,60,.6));border-color:rgba(50,75,130,.7);box-shadow:0 10px 30px rgba(25,40,75,.5),0 0 40px rgba(40,60,110,.35),0 0 0 1px rgba(255,255,255,.18) inset}
.nav a:active{transform:translateY(-2px) scale(1.04)}

.switch-btn{position:fixed;top:50%;transform:translateY(-50%);width:52px;height:130px;background:linear-gradient(135deg,rgba(139,0,0,.22),rgba(80,0,0,.32));border:2px solid rgba(139,0,0,.55);border-radius:28px;color:rgba(255,255,255,.96);font-size:34px;cursor:pointer;z-index:100;opacity:0;pointer-events:none;transition:var(--transition-smooth);backdrop-filter:blur(16px) saturate(150%);box-shadow:0 6px 20px rgba(0,0,0,.45),0 0 0 1px rgba(255,255,255,.1) inset,0 2px 6px rgba(139,0,0,.25) inset;display:flex;align-items:center;justify-content:center;font-weight:300}
.switch-btn::before{content:'';position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;border-radius:28px;background:linear-gradient(135deg,rgba(139,0,0,.3),transparent,rgba(139,0,0,.15));opacity:0;transition:var(--transition-smooth);pointer-events:none}
.switch-btn.visible{opacity:1;pointer-events:auto}
.switch-btn.left-side{left:30px}
.switch-btn.right-side{right:30px}
.switch-btn:hover{transform:translateY(-50%) scale(1.1);background:linear-gradient(135deg,rgba(139,0,0,.4),rgba(110,0,0,.5));border-color:rgba(160,0,0,.85);box-shadow:0 10px 32px rgba(139,0,0,.6),0 0 45px rgba(139,0,0,.4),0 0 0 1px rgba(255,255,255,.15) inset;text-shadow:0 0 12px rgba(255,255,255,.4)}
.switch-btn:hover::before{opacity:1}
.switch-btn:active{transform:translateY(-50%) scale(1.02)}
body.blue-theme .switch-btn{background:linear-gradient(135deg,rgba(0,60,139,.22),rgba(0,40,80,.32));border:2px solid rgba(0,60,139,.55);box-shadow:0 6px 20px rgba(0,0,0,.45),0 0 0 1px rgba(255,255,255,.1) inset,0 2px 6px rgba(0,60,139,.25) inset}
body.blue-theme .switch-btn::before{background:linear-gradient(135deg,rgba(0,60,139,.3),transparent,rgba(0,60,139,.15))}
body.blue-theme .switch-btn:hover{background:linear-gradient(135deg,rgba(0,75,155,.4),rgba(0,55,110,.5));border-color:rgba(0,90,165,.85);box-shadow:0 10px 32px rgba(0,60,139,.6),0 0 45px rgba(0,60,139,.4),0 0 0 1px rgba(255,255,255,.15) inset}
body.teal-theme .switch-btn{background:linear-gradient(135deg,rgba(0,128,128,.22),rgba(0,80,80,.32));border:2px solid rgba(0,128,128,.55);box-shadow:0 6px 20px rgba(0,0,0,.45),0 0 0 1px rgba(255,255,255,.1) inset,0 2px 6px rgba(0,128,128,.25) inset}
body.teal-theme .switch-btn::before{background:linear-gradient(135deg,rgba(0,128,128,.3),transparent,rgba(0,128,128,.15))}
body.teal-theme .switch-btn:hover{background:linear-gradient(135deg,rgba(0,155,155,.4),rgba(0,110,110,.5));border-color:rgba(0,165,165,.85);box-shadow:0 10px 32px rgba(0,128,128,.6),0 0 45px rgba(0,128,128,.4),0 0 0 1px rgba(255,255,255,.15) inset}

/* Progress bar */
.progress-container {
  position: absolute;
  bottom: 10%;
  width: 400px;
  max-width: 80%;
  height: 4px;
  background: rgba(255,255,255,0.1);
  border-radius: 2px;
  overflow: hidden;
  opacity: 0;
  transition: var(--transition-smooth);
  z-index: 2;
}
.progress-container.visible {
  opacity: 1;
}
.progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--red-primary), #ff4d4d);
  border-radius: 2px;
  transition: width 0.1s linear;
}
body.blue-theme .progress-bar {
  background: linear-gradient(90deg, var(--blue-primary), #4d94ff);
}
body.teal-theme .progress-bar {
  background: linear-gradient(90deg, var(--teal-primary), #4dffff);
}

/* Visualizer */
.visualizer {
  position: absolute;
  bottom: 12%;
  width: 400px;
  height: 60px;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 3px;
  opacity: 0;
  transition: var(--transition-smooth);
  z-index: 1;
}
.visualizer.visible {
  opacity: 0.7;
}
.visualizer.paused .bar {
  animation: none;
}
.bar {
  width: 4px;
  background: var(--red-primary);
  border-radius: 2px 2px 0 0;
  transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
body.blue-theme .bar {
  background: var(--blue-primary);
}
body.teal-theme .bar {
  background: var(--teal-primary);
}

/* Bottom attribution */
.attribution {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  font: 400 12px/1.4 -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
  color: rgba(255,255,255,0.4);
  letter-spacing: 0.5px;
  opacity: 0;
  transition: var(--transition-smooth);
  z-index: 2;
}
.attribution.visible {
  opacity: 1;
}
.creator-link {
  color: rgba(255,255,255,0.6);
  text-decoration: none;
  transition: var(--transition-smooth);
  animation: softGlow 2s ease-in-out infinite;
}

@keyframes softGlow {
  0%, 100% { 
    text-shadow: 0 0 5px rgba(255,255,255,0.2);
    color: rgba(255,255,255,0.6);
  }
  50% { 
    text-shadow: 0 0 12px rgba(255,255,255,0.8), 0 0 18px rgba(255,255,255,0.4);
    color: rgba(255,255,255,0.9);
  }
}

.creator-link:hover {
  color: #fff;
  text-shadow: 0 0 10px rgba(255,255,255,0.8), 0 0 20px rgba(255,255,255,0.6);
}

@media (max-width:768px){
  .vinyl-container{width:300px;height:300px}
  .nav{top:15px;padding:10px 16px;gap:12px}
  .nav a{padding:8px 16px;font-size:11px}
  .switch-btn{width:45px;height:100px;font-size:28px}
  .switch-btn.left-side{left:20px}
  .switch-btn.right-side{right:20px}
  .visualizer {width: 300px;}
  .progress-container {width: 300px;}
  .attribution { font-size: 11px; }
}
@media (max-width:480px){
  .vinyl-container{width:250px;height:250px}
  .nav{flex-direction:column;gap:8px;padding:10px}
  .nav a{padding:7px 12px;font-size:10px}
  .switch-btn{width:40px;height:80px;font-size:24px}
  .switch-btn.left-side{left:15px}
  .switch-btn.right-side{right:15px}
  .visualizer {width: 250px;}
  .progress-container {width: 250px;}
  .attribution { font-size: 10px; bottom: 15px; }
}
</style>
</head>
<body>
<div class="particles" id="particles"></div>
<button class="play-btn" id="b"><div class="play-icon"></div></button>
<div class="title" id="t">Heavy - The Mar√≠as</div>
<div class="vinyl-container" id="v"><img src="heavy_vinyl.png" alt="Vinyl" class="vinyl" id="i"></div>
<div class="lyrics" id="l"><span id="s"></span></div>
<div class="visualizer" id="viz"></div>
<div class="progress-container" id="pc">
  <div class="progress-bar" id="pb"></div>
</div>
<div class="attribution" id="attr">made by <a href="https://discord.gg/ERmducCwvK" target="_blank" class="creator-link">cyn</a></div>
<audio id="a1" loop preload="auto"><source src="Heavy_themarias.mp3" type="audio/mpeg"></audio>
<audio id="a2" loop preload="auto"><source src="no_one_noticed/No_one_noticed.mp3" type="audio/mpeg"></audio>
<audio id="a3" loop preload="auto"><source src="sienna/sienna_song.mp3" type="audio/mpeg"></audio>
<div class="nav" id="n">
  <a href="https://github.com/laincyn" target="_blank">GitHub</a>
  <a href="https://laincyn.github.io/qr_web/" target="_blank">Projects</a>
  <a href="https://discord.gg/ERmducCwvK" target="_blank">Discord</a>
</div>
<button class="switch-btn left-side" id="sw-left">‚Üê</button>
<button class="switch-btn right-side" id="sw-right">‚Üí</button>
<script>
const b=document.getElementById('b'),v=document.getElementById('v'),t=document.getElementById('t'),
      l=document.getElementById('l'),s=document.getElementById('s'),a1=document.getElementById('a1'),
      a2=document.getElementById('a2'),a3=document.getElementById('a3'),n=document.getElementById('n'),
      swLeft=document.getElementById('sw-left'),swRight=document.getElementById('sw-right'),
      i=document.getElementById('i'),body=document.body, particles=document.getElementById('particles'),
      viz=document.getElementById('viz'), pc=document.getElementById('pc'), pb=document.getElementById('pb'),
      attr=document.getElementById('attr');

const songsData={
  heavy:{
    title:"Heavy - The Mar√≠as",
    vinyl:"heavy_vinyl.png",
    audio:a1,
    theme:"red",
    // Adjusted lyrics timing - 1 second earlier
    lyrics:[
      {t:13.04,l:"I'm heavy"},{t:17.83,l:"I'm by your side"},{t:23.09,l:"Forget me"},
      {t:25.49,l:"'Cause I know what I need"},{t:27.70,l:"Like a loser like me could be fine"},
      {t:35.36,l:"I'm heavy"},{t:40.26,l:"Alone inside"},{t:45.13,l:"Don't tell me what I want, what I need"},
      {t:49.74,l:"Like a loser like me will be fine"},{t:56.04,l:"Maybe I'm living in my head"},
      {t:61.12,l:"Maybe I'm living to pretend"},{t:66.17,l:"Maybe I wanna stay in bed"},
      {t:69.28,l:"Far from the weight of the world in my hands"},{t:73.60,l:"'Cause they don't understand"},
      {t:100.94,l:"Is someone telling me don't get in the water?"},{t:106.30,l:"What have I done?"},
      {t:111.07,l:"I don't wanna get lost inside the color under my tongue"},
      {t:120.16,l:"'Cause I don't wanna be in love with another"},{t:124.87,l:"Even in another life"},
      {t:130.37,l:"Can someone tell me it's alright to be covered"},{t:134.53,l:"Underneath the covers? But I"},
      {t:138.81,l:"No, I don't need to sleep anymore"},{t:145.03,l:"Is someone banging at my door?"},
      {t:149.80,l:"When I just wanna be alone?"},{t:155.12,l:"Is someone banging at my door?"},
      {t:159.93,l:"Je ne sais pas qui est ici"},{t:164.64,l:"Is someone banging at my door"},
      {t:170.04,l:"When I just wanna be alone"},{t:174.91,l:"Is someone banging at my door, door, door, door?"},
      {t:181.36,l:"Door, door, door, door, at my door"},{t:189.78,l:"Is someone banging at my door?"},
      {t:194.56,l:"'Cause I just wanna be alone"},{t:199.49,l:"Yeah, I just wanna be alone"},
      {t:204.97,l:"(I just wanna be alone)"},{t:209.45,l:"(Yeah, I just wanna be alone)"},
      {t:214.88,l:"(I just wanna be alone)"}
    ]
  },
  noone:{
    title:"No One Noticed - The Mar√≠as",
    vinyl:"no_one_noticed/noone_vinyl.png",
    audio:a2,
    theme:"blue",
    // Adjusted lyrics timing - 1.5 seconds earlier
    lyrics:[
      {t:-1.48,l:"Maybe I"},{t:3.73,l:"Lost my mind"},{t:8.44,l:"No one noticed"},
      {t:13.34,l:"No one noticed"},{t:18.01,l:"It's getting old (I'd kinda like it if you'd call me)"},
      {t:23.26,l:"All alone ('cause I'm so over bein' lonely)"},{t:28.28,l:"May have lost it (I need a virtual connection)"},
      {t:33.06,l:"I have lost it (be my video obsession)"},{t:57.49,l:"No one tried"},
      {t:62.17,l:"To read my eyes"},{t:67.35,l:"No one but you"},{t:72.28,l:"Wish it were true"},
      {t:77.14,l:"Maybe I (I'd kinda like it if you'd call me)"},{t:81.92,l:"It's not right ('cause I'm so over bein' lonely)"},
      {t:87.02,l:"Make you mine (I need a virtual connection)"},{t:91.88,l:"Take our time (be my video obsession)"},
      {t:98.17,l:"Come on, don't leave me, it can't be that easy, babe"},{t:103.14,l:"If you believe me, I guess I'll get on a plane"},
      {t:107.86,l:"Fly to your city, excited to see your face"},{t:112.75,l:"Hold me, console me, and then I'll leave without a trace"},
      {t:117.94,l:"Come on, don't leave me, it can't be that easy, babe"},{t:122.50,l:"If you believe me, I guess I'll get on a plane"},
      {t:127.47,l:"Fly to your city, excited to see your face"},{t:132.61,l:"Hold me, console me, then I'll leave without a trace"},
      {t:137.37,l:"Come on, don't leave me, it can't be that easy, babe"},{t:142.43,l:"If you believe me, I guess I'll get on a plane"},
      {t:147.38,l:"Fly to your city, excited to see your face"},{t:152.01,l:"Hold me, console me, and then I'll leave without a trace (maybe I)"},
      {t:157.04,l:"Come on, don't leave me, it can't be that easy, babe (it's not right)"},{t:162.02,l:"If you believe me, I guess I'll get on a plane (make you mine)"},
      {t:166.71,l:"Fly to your city, excited to see your face (take our time)"},{t:171.76,l:"Hold me, console me and then I'll leave without a trace"},
      {t:196.86,l:"I'd kinda like it if you'd call me (it's not right)"},{t:201.45,l:"'Cause I'm so over bein' lonely (make you mine)"},
      {t:206.21,l:"I need a virtual connection (take our time)"},{t:211.47,l:"Be my video obsession"}
    ]
  },
  sienna:{
    title:"Sienna - The Mar√≠as",
    vinyl:"sienna/sienna_vinyl.png",
    audio:a3,
    theme:"teal",
    // Lyrics timing adjusted to start at 3:00
    lyrics:[
      {t:0.02,l:"Please tell me not to go"}, // BLANK - first lyric
    {t:6.67,l:"We've been here long before"},
    {t:13.18,l:"I live under your eyelids"},{t:19.95,l:"I'll always be yours"},
    {t:26.07,l:"I'll lay on your rooftop"},{t:29.10,l:"In the freezing cold"},
    {t:32.37,l:"And I'll watch the sunset"},{t:35.74,l:"Wearing all your clothes"},
    {t:38.61,l:"I can feel you with me"},{t:42.27,l:"Like I did before"},
    {t:45.45,l:"Like when I sang you a love song"},{t:48.83,l:"By Norah Jones"},
    {t:51.41,l:"Ooh, Sienna"},{t:56.75,l:"Would've been cute"},
    {t:63.52,l:"Ooh, Sienna"},{t:71.48,l:"Would look just like you"},
    {t:77.92,l:"I came clean"},{t:85.67,l:"And it feels so good"},
    {t:91.18,l:"But i feel seen"},{t:97.79,l:"Only through you"},
    {t:105.67,l:"I'll wait here tomorrow"},{t:108.21,l:"Outside your door"},
    {t:111.93,l:"Like i did in december"},{t:114.71,l:"When you held me close"},
    {t:118.42,l:"Coming up on your corner"},{t:121.38,l:"Pulling out my hair"},
    {t:124.50,l:"Hear the creak in the floorboards"},{t:127.95,l:"Going up the stairs"},
    {t:130.25,l:"Sienna"},{t:138.15,l:"Would've been cute"},
    {t:143.15,l:"Sienna"},{t:151.08,l:"Would look just like you"},
    {t:156.02,l:"With a temper like you"},{t:158.82,l:"Run around like you"},
    {t:162.03,l:"Jumping in the pool"},{t:165.19,l:"Like you"},
    {t:169.13,l:"Sing to all her pets"},{t:171.40,l:"In the way I did"},
    {t:175.12,l:"Be sensitive"},{t:178.03,l:"Like you"},
    {t:184.08,l:"And I smile when i think of"},{t:186.48,l:"All the times we had"},
    {t:189.55,l:"On the beach in the winter"},{t:192.79,l:"When the waves were mad"},
    {t:196.13,l:"Down by the water"},{t:199.57,l:"Crystal clear"},
    {t:203.76,l:"See her face in the forest"},{t:205.56,l:"Then it disappears"}
    ]
  }
};

const songOrder = ['heavy', 'noone', 'sienna'];
let currentSongIndex = 0;
let currentSong = songOrder[currentSongIndex];
let idx=-1,lyricsInterval,firstLyricSkipped=false;
let visualizerBars = [];
let isPlaying = false;
let visualizerInterval;

// Create enhanced particles
function createParticles() {
  for (let i = 0; i < 60; i++) {
    const particle = document.createElement('div');
    particle.classList.add('particle');
    const size = Math.random() * 4 + 1;
    particle.style.width = `${size}px`;
    particle.style.height = `${size}px`;
    particle.style.left = `${Math.random() * 100}%`;
    particle.style.animationDuration = `${Math.random() * 15 + 20}s`;
    particle.style.animationDelay = `${Math.random() * 10}s`;
    particles.appendChild(particle);
  }
}

// Create visualizer bars
function createVisualizer() {
  viz.innerHTML = '';
  visualizerBars = [];
  for (let i = 0; i < 40; i++) {
    const bar = document.createElement('div');
    bar.classList.add('bar');
    bar.style.height = `${Math.random() * 20 + 5}px`;
    viz.appendChild(bar);
    visualizerBars.push(bar);
  }
}

// Animate visualizer with smoother transitions
function animateVisualizer() {
  if (!isPlaying) return;
  
  visualizerBars.forEach(bar => {
    const newHeight = Math.random() * 40 + 10;
    bar.style.height = `${newHeight}px`;
  });
}

// Update progress bar
function updateProgress() {
  const aud = songsData[currentSong].audio;
  const progress = (aud.currentTime / aud.duration) * 100;
  pb.style.width = `${progress}%`;
}

// Update switch buttons based on current song
function updateSwitchButtons() {
  if (currentSongIndex === 0) {
    // First song - only right button
    swLeft.classList.remove('visible');
    swRight.classList.add('visible');
  } else if (currentSongIndex === songOrder.length - 1) {
    // Last song - only left button
    swLeft.classList.add('visible');
    swRight.classList.remove('visible');
  } else {
    // Middle song - both buttons
    swLeft.classList.add('visible');
    swRight.classList.add('visible');
  }
}

// Switch to next song
function nextSong() {
  currentSongIndex = (currentSongIndex + 1) % songOrder.length;
  switchToSong(songOrder[currentSongIndex]);
}

// Switch to previous song
function previousSong() {
  currentSongIndex = (currentSongIndex - 1 + songOrder.length) % songOrder.length;
  switchToSong(songOrder[currentSongIndex]);
}

// Switch to specific song
function switchToSong(songKey) {
  const prevSong = currentSong;
  currentSong = songKey;
  currentSongIndex = songOrder.indexOf(songKey);
  const newData = songsData[currentSong];
  const oldAud = songsData[prevSong].audio;
  const newAud = newData.audio;
  
  if(lyricsInterval)clearInterval(lyricsInterval);
  
  swLeft.classList.remove('visible');
  swRight.classList.remove('visible');
  viz.classList.remove('visible');
  pc.classList.remove('visible');
  attr.classList.remove('visible');
  
  t.classList.remove('visible');
  v.classList.remove('visible');
  l.classList.remove('visible');
  s.classList.remove('in','out');
  s.textContent='';
  idx=-1;
  firstLyricSkipped = false;
  
  let vol=oldAud.volume;
  const fadeOut=setInterval(()=>{
    if(vol>0){vol-=.05;oldAud.volume=Math.max(vol,0)}
    else{clearInterval(fadeOut);oldAud.pause();oldAud.currentTime=0}
  },50);
  
  setTimeout(()=>{
    t.textContent=newData.title;
    i.src=newData.vinyl;
    
    // Update theme
    body.classList.remove('blue-theme', 'teal-theme');
    if(newData.theme==='blue')body.classList.add('blue-theme');
    else if(newData.theme==='teal')body.classList.add('teal-theme');
    
    newAud.currentTime = currentSong==='sienna' ? 180 : (currentSong==='heavy' ? 99 : 97);
    newAud.volume=0.7;
    newAud.play().then(()=>{
      let v=0;
      const fadeIn=setInterval(()=>{
        if(v<0.7){v+=.05;newAud.volume=Math.min(v,0.7)}
        else clearInterval(fadeIn)
      },50)
    });
    
    isPlaying = true;
    i.classList.remove('paused');
    viz.classList.remove('paused');
    
    setTimeout(()=>{
      v.classList.add('visible');
      t.classList.add('visible');
      l.classList.add('visible');
      updateSwitchButtons();
      viz.classList.add('visible');
      pc.classList.add('visible');
      attr.classList.add('visible');
      startLyrics();
    },500);
  },1500);
}

// Toggle play/pause when vinyl is clicked
v.addEventListener('click', function() {
  const aud = songsData[currentSong].audio;
  
  if (isPlaying) {
    // Pause everything
    aud.pause();
    i.classList.add('paused');
    viz.classList.add('paused');
    isPlaying = false;
    
    // Clear intervals
    if (visualizerInterval) {
      clearInterval(visualizerInterval);
    }
  } else {
    // Play everything
    aud.play();
    i.classList.remove('paused');
    viz.classList.remove('paused');
    isPlaying = true;
    
    // Restart visualizer
    visualizerInterval = setInterval(animateVisualizer, 150);
  }
});

// Event listeners for switch buttons
swLeft.addEventListener('click', previousSong);
swRight.addEventListener('click', nextSong);

// Initialize play button visibility
window.addEventListener('DOMContentLoaded', () => {
  createParticles();
  createVisualizer();
  
  setTimeout(() => {
    b.classList.add('visible');
  }, 500);
});

b.onclick=()=>{
  b.classList.add('fade');
  const aud=songsData[currentSong].audio;
  aud.currentTime=currentSong==='sienna' ? 180 : (currentSong==='heavy' ? 99 : 97);
  aud.volume=0.7;
  aud.play().then(()=>{
    let vol=0;
    const fade=setInterval(()=>{
      if(vol<0.7){vol+=.02;aud.volume=Math.min(vol,0.7)}
      else clearInterval(fade)
    },40)
  });
  
  isPlaying = true;
  
  setTimeout(()=>v.classList.add('visible'),300);
  setTimeout(()=>{t.classList.add('visible');l.classList.add('visible')},1500);
  setTimeout(()=>{
    n.classList.add('visible');
    updateSwitchButtons();
    viz.classList.add('visible');
    pc.classList.add('visible');
    attr.classList.add('visible');
  },2000);
  setTimeout(()=>b.style.display='none',700);
  firstLyricSkipped = false;
  startLyrics();
  
  // Start visualizer animation
  visualizerInterval = setInterval(animateVisualizer, 150);
  
  // Start progress update
  const progressInterval = setInterval(updateProgress, 100);
};

function startLyrics(){
  if(lyricsInterval)clearInterval(lyricsInterval);
  idx=-1;
  lyricsInterval=setInterval(()=>{
    const aud=songsData[currentSong].audio;
    const lyrics=songsData[currentSong].lyrics;
    const time=aud.currentTime;
    for(let i=0;i<lyrics.length;i++){
      if(time>=lyrics[i].t&&(i===lyrics.length-1||time<lyrics[i+1].t)){
        if(idx!==i){
          // Skip the first lyric that appears
          if(!firstLyricSkipped) {
            firstLyricSkipped = true;
            idx = i;
            break;
          }
          
          if(idx>=0){s.classList.remove('in');s.classList.add('out')}
          idx=i;
          setTimeout(()=>{
            s.classList.remove('out');
            s.textContent=lyrics[i].l;
            s.classList.add('in')
          },600)
        }
        break
      }
    }
  },100);
}

i.onerror=()=>{
  v.innerHTML='<div style="width:100%;height:100%;border-radius:50%;background:radial-gradient(circle,#1a1a1a 30%,#000 70%);animation:spin 4.5s linear infinite;display:flex;justify-content:center;align-items:center;box-shadow:0 0 40px rgba(0,0,0,.5)"><div style="width:80px;height:80px;border-radius:50%;background:#8b0000;border:3px solid #000"></div></div>'
};
</script>
</body>
</html>